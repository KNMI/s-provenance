
 			


 

var stationStore=Ext.create('CF.store.Stations');
  

//stationStore.on('beforeload',function() {alert('load '+this.model) })

Ext.define('CF.controller.StationsController', {
     extend:'Ext.app.Controller',
     //	requires:['CF.model.Station','CF.model.Network'],
     //   models:['Station','Network'],
  
     init:function(){
          this.control({ 
   		  'button[itemId=station_but]':{
				click:function(button) { 
            // The getForm() method returns the Ext.form.Basic instance:
            var form = button.up('form').getForm();
            
           if (form.isValid()) {
	             
                // Submit the Ajax request and handle the response
              	  
                  stationStore.getProxy().url = '/j2ep-1.0/iris/fdsnws/station/1/query?loc=00&cha=LH?,BH*&level=station&format=xml&nodata=404&'+form.getValues(true),
				//  stationStore.getProxy().url = '/hpc-usecase-portlet/data/stations.xml';				  
				  stationStore.load();
									
 						
                
            }
            
        }
        	}});

          this.application.on({
             
       					 });
     
					}
});